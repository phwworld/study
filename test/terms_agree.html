<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="agreement-form">
        <p class="title">약관동의</p>
        <div class="all-check">
            <label class="checkbox">
                <input type="checkbox" class="select-all">
                <span class="txt">모든 약관을 확인하고 전체 동의합니다.</span>
            </label>
        </div>
        <ul class="list">	
            <li class="item">
                <label class="checkbox">
                    <input type="checkbox">
                    <span class="txt">[필수] 이용약관 동의</span>
                </label>
                <button type="button" class="btn small outline2 thin">내용보기</button>
            </li>
            <li class="item">
                <label class="checkbox">
                    <input type="checkbox">
                    <span class="txt">[필수] 개인정보 수집 및 이용 동의</span>
                </label>
                <button type="button" class="btn small outline2 thin">내용보기</button>
            </li>
            <li class="item inner">
                <label class="checkbox">
                    <input type="checkbox">
                    <span class="txt">[선택] 개인정보 자사 마케팅 수집 및 이용 동의</span>
                </label>
                <div class="info-box">
                    <ul>
                        <li>- 수집/이용 목적: 자사 마케팅을 위한 개인정보 이용</li>
                        <li>- 수집항목: 구매자 정보, 상품 구매/취소/반품/교환/환불 정보, 수령인 정보</li>
                        <li>- 보유/이용기간: 회원 탈퇴 후 5일까지</li>
                    </ul>
                    <p class="notice">※ 개인정보 제공에 대한 동의를 거부할 권리가 있으며, 동의를 거부할 경우 마케팅 정보를 받을 수 없습니다.</p>
                </div>
            </li>
            <li class="item inner">
                <label class="checkbox">
                    <input type="checkbox" class="select-all-mkt">
                    <span class="txt">[선택] 마케팅 정보 수신 동의</span>
                </label>
                <div class="info-box">
                    <ul class="marketing-list">
                        <li>
                            <label class="checkbox">
                                <input type="checkbox">
                                <span class="txt">이메일</span>
                            </label>
                        </li>
                        <li>
                            <label class="checkbox">
                                <input type="checkbox">
                                <span class="txt">SMS</span>
                            </label>
                        </li>
                        <li>
                            <label class="checkbox">
                                <input type="checkbox">
                                <span class="txt">전화(상담)</span>
                            </label>
                        </li>
                    </ul>
                    <p class="notice">※ 마케팅 정보 수신동의를 하시면 스키니랩에서 제공하는 쇼핑/혜택 및이벤트 소식을 받을 수 있습니다.</p>
                </div>
            </li>
        </ul>
    </div>
    <script>
        const $agreementForm = document.querySelector('.agreement-form');
        const $selectAll = $agreementForm.querySelector('.select-all');
        const $listInput = $agreementForm.querySelectorAll('.list input');
        const $selectAllMkt = $agreementForm.querySelector('.select-all-mkt');
        const $mktListInput = $agreementForm.querySelectorAll('.marketing-list input');

        const toggleCheckbox = (allBox, itemBox) => {
            allBox.addEventListener('change', () => {
            itemBox.forEach((item) => {
                item.checked = allBox.checked;
                });
            })
        }
        toggleCheckbox($selectAll, $listInput);
        toggleCheckbox($selectAllMkt, $mktListInput);

        $listInput.forEach((item) => {
            item.addEventListener('change', () => {
            const isChecked = Array.from($listInput).every(i => i.checked);
            $selectAll.checked = isChecked;
            });
        });

        $mktListInput.forEach((item) => {
            item.addEventListener('change', () => {
            const isChecked = Array.from($mktListInput).some(i => i.checked);
            $selectAllMkt.checked = isChecked;
            });
        });
    </script>
</body>
</html>